var e=Object.defineProperty,n=Object.prototype.hasOwnProperty,l=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,t=(n,l,o)=>l in n?e(n,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[l]=o;import{d as a,r as u,a as r,i as s,w as c,c as i,b as p,e as d,v as m,f as v,g as b,t as g,h as f,o as k,j as y,k as h,l as w,L,m as U}from"./vendor.45d8dce4.js";!function(e=".",n="__import__"){try{self[n]=new Function("u","return import(u)")}catch(l){const o=new URL(e,location),t=e=>{URL.revokeObjectURL(e.src),e.remove()};self[n]=e=>new Promise(((l,a)=>{const u=new URL(e,o);if(self[n].moduleMap[u])return l(self[n].moduleMap[u]);const r=new Blob([`import * as m from '${u}';`,`${n}.moduleMap['${u}']=m;`],{type:"text/javascript"}),s=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){a(new Error(`Failed to import: ${e}`)),t(s)},onload(){l(self[n].moduleMap[u]),t(s)}});document.head.appendChild(s)})),self[n].moduleMap={}}}("/login-client-vue/assets/");const O=a({name:"App",setup(){const e=u(""),n=u(!1),l=u(""),o=r(s("login"));return c((()=>o.user),(e=>{l.value=e&&e.name||""})),{url:e,ssl:n,name:l,login:o}}}),j=p("h1",null," login-client-vue ",-1),x=p("b",null,"Connection:",-1),C=p("br",null,null,-1),R=p("br",null,null,-1),S=p("label",{for:"sslCheckbox"},"SSL",-1),I=p("br",null,null,-1),M=p("b",null,"Status:",-1),E=p("br",null,null,-1),N=p("br",null,null,-1),P=p("br",null,null,-1),$=p("br",null,null,-1),_=p("br",null,null,-1),T={key:0},V=p("br",null,null,-1),F={key:1};O.render=function(e,n,l,o,t,a){const u=y("user-status");return k(),i("main",null,[j,p("section",null,[p("p",null,[x,C,d(p("input",{"onUpdate:modelValue":n[1]||(n[1]=n=>e.url=n),type:"text",placeholder:"Login Server URL (without protocol)"},null,512),[[m,e.url]]),R,d(p("input",{id:"sslCheckbox","onUpdate:modelValue":n[2]||(n[2]=n=>e.ssl=n),type:"checkbox"},null,512),[[v,e.ssl]]),S,I,p("button",{onClick:n[3]||(n[3]=n=>e.login.connect(e.url,{ssl:e.ssl}))}," Connect ")]),p("p",null,[M,E,b(" Connected: "+g(e.login.connected),1),N,b(" Logged in: "+g(e.login.loggedIn),1),P,b(" User: "+g(e.login.user&&e.login.user.name),1),$,b(" Token: "+g(e.login.token?"✅":"❌"),1),_,e.login.loggedIn?(k(),i("span",T,[d(p("input",{"onUpdate:modelValue":n[4]||(n[4]=n=>e.name=n),type:"text",placeholder:"Name"},null,512),[[m,e.name]]),p("button",{onClick:n[5]||(n[5]=n=>e.login.setName(e.name))}," Set name "),V])):f("",!0),e.login.connected?(k(),i("span",F,[p("button",{onClick:n[6]||(n[6]=n=>e.login.disconnect())}," Disconnect ")])):f("",!0)])]),p(u)])};const A=a({name:"UserStatus",setup(){const e=s("login");return{login:r(e)}}});A.render=function(e,n,l,o,t,a){return k(),i("a",null,g(e.login.user?e.login.user.name:"login"),1)},A.install=e=>{e.component(A.name,A)};const B=u(!1),D=h(B),q=u(null),z=h(q),G=w((()=>null!==z.value)),H=u(null),J=h(H),K=u([]),Q=h(K),W=u(null),X=h(W),Y=u(null),Z=h(Y);let ee;const ne=L.events,le=L.errors;function oe(e,n={}){H.value&&H.value.connected&&H.value.disconnect(),H.value=new L(e,n),H.value.connect(),H.value.addEventListener(null,(e=>{switch(e.type){case ne.connect:B.value=!0;break;case ne.disconnect:B.value=!1;break;case ne.login:q.value=e.user;break;case ne.logout:q.value=null,Y.value=null;break;case ne.update:q.value=e.user;break;case ne.providers:K.value=e.providers;break;case ne.about:W.value=e;break;case ne.token:Y.value=e.token,clearTimeout(ee),ee=setTimeout((()=>{Y.value=null}),1e3*e.expiresIn)}}))}const te={connected:D,user:z,loggedIn:G,connect:oe,disconnect:function(){H.value&&H.value.connected&&H.value.disconnect()},client:J,providers:Q,about:X,token:Z,events:ne,errors:le,setName:function(e){J.value&&J.value.setName(e)}};var ae=((e,a)=>{for(var u in a||(a={}))n.call(a,u)&&t(e,u,a[u]);if(l)for(var u of l(a))o.call(a,u)&&t(e,u,a[u]);return e})({install:(e,t={})=>{var{url:a}=t,u=((e,t)=>{var a={};for(var u in e)n.call(e,u)&&t.indexOf(u)<0&&(a[u]=e[u]);if(null!=e&&l)for(var u of l(e))t.indexOf(u)<0&&o.call(e,u)&&(a[u]=e[u]);return a})(t,["url"]);a&&oe(a,u),e.provide("login",te),e.use(A)}},te);U(O).use(ae).mount("#app");
