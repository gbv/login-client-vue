var n=Object.defineProperty,e=Object.prototype.hasOwnProperty,l=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,t=(e,l,o)=>l in e?n(e,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[l]=o;import{d as u,r as a,a as s,i,w as r,c,b as d,e as v,v as p,f as g,g as m,t as b,h as w,F as f,j as k,o as y,k as h,l as L,L as C,m as U,n as S,p as O,q as j,s as x,u as I}from"./vendor.f9335f6c.js";!function(n=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(l){const o=new URL(n,location),t=n=>{URL.revokeObjectURL(n.src),n.remove()};self[e]=n=>new Promise(((l,u)=>{const a=new URL(n,o);if(self[e].moduleMap[a])return l(self[e].moduleMap[a]);const s=new Blob([`import * as m from '${a}';`,`${e}.moduleMap['${a}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){u(new Error(`Failed to import: ${n}`)),t(i)},onload(){l(self[e].moduleMap[a]),t(i)}});document.head.appendChild(i)})),self[e].moduleMap={}}}("/login-client-vue/dev/assets/");const W=u({name:"App",setup(){const n=a("localhost:3004"),e=a(!1),l=a(""),o=s(i("login"));return o.connect(n.value,{ssl:e.value}),r((()=>o.user),(n=>{l.value=n&&n.name||""})),{url:n,ssl:e,name:l,login:o,version:"0.0.2",commit:"c9f2cb9",branch:"dev"}}}),R=d("div",{style:{clear:"both"}},null,-1),T=d("h1",null," login-client-vue ",-1),_=d("b",null,"Connection:",-1),E=d("br",null,null,-1),M=d("br",null,null,-1),N=d("label",{for:"sslCheckbox"},"SSL",-1),P=d("br",null,null,-1),$=d("b",null,"Status:",-1),B=d("br",null,null,-1),F=d("br",null,null,-1),V=d("br",null,null,-1),q=d("br",null,null,-1),A=d("br",null,null,-1),D={key:0},z=d("br",null,null,-1),G=d("br",null,null,-1),H={key:1},J=d("br",null,null,-1),K={key:2},Q=d("hr",null,null,-1);W.render=function(n,e,l,o,t,u){const a=k("user-status");return y(),c(f,null,[d("nav",null,[d(a,{style:{float:"right"}}),R]),d("main",null,[T,d("section",null,[d("p",null,[_,E,v(d("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>n.url=e),type:"text",placeholder:"Login Server URL (without protocol)"},null,512),[[p,n.url]]),M,v(d("input",{id:"sslCheckbox","onUpdate:modelValue":e[2]||(e[2]=e=>n.ssl=e),type:"checkbox"},null,512),[[g,n.ssl]]),N,P,d("button",{onClick:e[3]||(e[3]=e=>n.login.connect(n.url,{ssl:n.ssl}))}," Connect ")]),d("p",null,[$,B,m(" Connected: "+b(n.login.connected),1),F,m(" Logged in: "+b(n.login.loggedIn),1),V,m(" User: "+b(n.login.user&&n.login.user.name),1),q,m(" Token: "+b(n.login.token?"✅":"❌"),1),A,n.login.loggedIn?(y(),c("span",D,[v(d("input",{"onUpdate:modelValue":e[4]||(e[4]=e=>n.name=e),type:"text",placeholder:"Name"},null,512),[[p,n.name]]),d("button",{onClick:e[5]||(e[5]=e=>n.login.setName(n.name))}," Set name "),z,d("button",{onClick:e[6]||(e[6]=e=>n.login.openLogoutWindow())}," Logout "),G])):(y(),c("span",H,[d("button",{onClick:e[7]||(e[7]=e=>n.login.openLoginWindow())}," Login "),J])),n.login.connected?(y(),c("span",K,[d("button",{onClick:e[8]||(e[8]=e=>n.login.disconnect())}," Disconnect ")])):w("",!0)])]),Q,d("footer",null," login-client-vue version "+b(n.version)+" ("+b(n.branch)+" - "+b(n.commit)+") ",1)])],64)};const X=a(!1),Y=h(X),Z=a(null),nn=h(Z),en=L((()=>null!==nn.value)),ln=a(null),on=h(ln),tn=a([]),un=h(tn),an=a(null),sn=h(an),rn=a(null),cn=h(rn);let dn;const vn=C.events,pn=C.errors;function gn(n,e={}){ln.value&&ln.value.connected&&ln.value.disconnect(),ln.value=new C(n,e),ln.value.connect(),ln.value.addEventListener(null,(n=>{var e;switch(e=n.type,mn.window&&mn.eventType==e&&setTimeout((()=>{mn.window&&mn.window.close(),mn.window=null}),100),n.type){case vn.connect:X.value=!0;break;case vn.disconnect:X.value=!1;break;case vn.login:Z.value=n.user;break;case vn.logout:Z.value=null,rn.value=null;break;case vn.update:Z.value=n.user;break;case vn.providers:tn.value=n.providers;break;case vn.about:an.value=n;break;case vn.token:rn.value=n.token,clearTimeout(dn),dn=setTimeout((()=>{rn.value=null}),1e3*n.expiresIn)}}))}const mn={window:null,eventType:null};const bn={connected:Y,user:nn,loggedIn:en,connect:gn,disconnect:function(){ln.value&&ln.value.connected&&ln.value.disconnect()},client:on,providers:un,about:sn,token:cn,events:vn,errors:pn,setName:function(n){on.value&&on.value.setName(n)},openLoginWindow:function(n){if(!on.value||!on.value.connected)return;const e=un.value.find((({id:e})=>n===e)),l=e&&e.loginURL||sn.value&&sn.value.baseUrl+"login/";l&&(mn.window=window.open(l),mn.eventType=vn.login)},openLogoutWindow:function(){if(!on.value||!on.value.connected)return;const n=sn.value&&sn.value.baseUrl+"logout/";n&&(mn.window=window.open(n),mn.eventType=vn.logout)},openBaseWindow:function(){if(!on.value||!on.value.connected)return;const n=sn.value&&sn.value.baseUrl;n&&window.open(n)}};var wn=((n,u)=>{for(var a in u||(u={}))e.call(u,a)&&t(n,a,u[a]);if(l)for(var a of l(u))o.call(u,a)&&t(n,a,u[a]);return n})({install:(n,t={})=>{var{url:u}=t,a=((n,t)=>{var u={};for(var a in n)e.call(n,a)&&t.indexOf(a)<0&&(u[a]=n[a]);if(null!=n&&l)for(var a of l(n))t.indexOf(a)<0&&o.call(n,a)&&(u[a]=n[a]);return u})(t,["url"]);u&&gn(u,a),n.provide("login",bn)}},bn);const fn=u({name:"UserStatus",setup:()=>({login:s(wn)})}),kn=O();j("data-v-646d4854");const yn={class:"user-status"},hn=d("span",{class:"carret-down"},"▼",-1),Ln={class:"user-status-dropdown"},Cn={key:0},Un=d("hr",null,null,-1),Sn=d("p",null," Sign in via ",-1);x();const On=kn(((n,e,l,o,t,u)=>(y(),c("div",yn,[d("a",{href:"",class:{"user-status-disconnected":!n.login.connected},onClick:e[1]||(e[1]=U((e=>n.login.loggedIn?n.login.openBaseWindow():n.login.openLoginWindow()),["prevent"]))},[m(b(n.login.loggedIn?n.login.user.name:"Sign in")+" ",1),hn],2),d("div",Ln,[n.login.connected?n.login.loggedIn?(y(),c(f,{key:1},[d("p",null," Signed in as "+b(n.login.user.name)+". ",1),Un,d("ul",null,[d("li",null,[d("a",{href:"",onClick:e[2]||(e[2]=U((e=>n.login.openLogoutWindow()),["prevent"]))}," Sign out ")])])],64)):(y(),c(f,{key:2},[Sn,d("ul",null,[(y(!0),c(f,null,S(n.login.providers,(e=>(y(),c("li",{key:e.id},[d("a",{href:"",onClick:U((l=>n.login.openLoginWindow(e.id)),["prevent"])},[e.image?(y(),c("img",{key:0,src:e.image},null,8,["src"])):w("",!0),m(" "+b(e.name),1)],8,["onClick"])])))),128))])],64)):(y(),c("p",Cn," Error: Could not connect to Login Server. "))])]))));fn.render=On,fn.__scopeId="data-v-646d4854",fn.install=n=>{n.component(fn.name,fn)},I(W).use(wn).use(fn).mount("#app");
