var n=Object.defineProperty,e=Object.prototype.hasOwnProperty,l=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,t=(e,l,o)=>l in e?n(e,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[l]=o;import{d as a,r as u,a as s,i,w as r,c,b as d,e as v,v as p,f as g,g as m,t as b,h as w,F as f,j as k,o as y,k as h,l as L,m as U,p as C,n as O,q as S,s as j,L as x,u as I}from"./vendor.14727f45.js";!function(n=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(l){const o=new URL(n,location),t=n=>{URL.revokeObjectURL(n.src),n.remove()};self[e]=n=>new Promise(((l,a)=>{const u=new URL(n,o);if(self[e].moduleMap[u])return l(self[e].moduleMap[u]);const s=new Blob([`import * as m from '${u}';`,`${e}.moduleMap['${u}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){a(new Error(`Failed to import: ${n}`)),t(i)},onload(){l(self[e].moduleMap[u]),t(i)}});document.head.appendChild(i)})),self[e].moduleMap={}}}("/login-client-vue/dev/assets/");const W=a({name:"App",setup(){const n=u("localhost:3004"),e=u(!1),l=u(""),o=s(i("login"));return o.connect(n.value,{ssl:e.value}),r((()=>o.user),(n=>{l.value=n&&n.name||""})),{url:n,ssl:e,name:l,login:o,version:"0.0.2",commit:"ee573b9",branch:"dev"}}}),R=d("div",{style:{clear:"both"}},null,-1),T=d("h1",null," login-client-vue ",-1),_=d("b",null,"Connection:",-1),M=d("br",null,null,-1),E=d("br",null,null,-1),N=d("label",{for:"sslCheckbox"},"SSL",-1),P=d("br",null,null,-1),$=d("b",null,"Status:",-1),B=d("br",null,null,-1),F=d("br",null,null,-1),V=d("br",null,null,-1),q=d("br",null,null,-1),A=d("br",null,null,-1),D={key:0},z=d("br",null,null,-1),G=d("br",null,null,-1),H={key:1},J=d("br",null,null,-1),K={key:2},Q=d("hr",null,null,-1);W.render=function(n,e,l,o,t,a){const u=k("user-status");return y(),c(f,null,[d("nav",null,[d(u,{style:{float:"right"}}),R]),d("main",null,[T,d("section",null,[d("p",null,[_,M,v(d("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>n.url=e),type:"text",placeholder:"Login Server URL (without protocol)"},null,512),[[p,n.url]]),E,v(d("input",{id:"sslCheckbox","onUpdate:modelValue":e[2]||(e[2]=e=>n.ssl=e),type:"checkbox"},null,512),[[g,n.ssl]]),N,P,d("button",{onClick:e[3]||(e[3]=e=>n.login.connect(n.url,{ssl:n.ssl}))}," Connect ")]),d("p",null,[$,B,m(" Connected: "+b(n.login.connected),1),F,m(" Logged in: "+b(n.login.loggedIn),1),V,m(" User: "+b(n.login.user&&n.login.user.name),1),q,m(" Token: "+b(n.login.token?"✅":"❌"),1),A,n.login.loggedIn?(y(),c("span",D,[v(d("input",{"onUpdate:modelValue":e[4]||(e[4]=e=>n.name=e),type:"text",placeholder:"Name"},null,512),[[p,n.name]]),d("button",{onClick:e[5]||(e[5]=e=>n.login.setName(n.name))}," Set name "),z,d("button",{onClick:e[6]||(e[6]=e=>n.login.openLogoutWindow())}," Logout "),G])):(y(),c("span",H,[d("button",{onClick:e[7]||(e[7]=e=>n.login.openLoginWindow())}," Login "),J])),n.login.connected?(y(),c("span",K,[d("button",{onClick:e[8]||(e[8]=e=>n.login.disconnect())}," Disconnect ")])):w("",!0)])]),Q,d("footer",null," login-client-vue version "+b(n.version)+" ("+b(n.branch)+" - "+b(n.commit)+") ",1)])],64)};const X=a({name:"UserStatus",setup(){const n=i("login");return{login:s(n)}}}),Y=U();C("data-v-0aaa1c9d");const Z={class:"user-status"},nn=d("span",{class:"carret-down"},"▼",-1),en={class:"user-status-dropdown"},ln=d("hr",null,null,-1),on=d("p",null," Sign in via ",-1);O();const tn=Y(((n,e,l,o,t,a)=>(y(),c("div",Z,[d("a",{href:"",onClick:e[1]||(e[1]=h((e=>n.login.loggedIn?n.login.openBaseWindow():n.login.openLoginWindow()),["prevent"]))},[m(b(n.login.loggedIn?n.login.user.name:"Sign in")+" ",1),nn]),d("div",en,[n.login.loggedIn?(y(),c(f,{key:0},[d("p",null," Signed in as "+b(n.login.user.name)+". ",1),ln,d("ul",null,[d("li",null,[d("a",{href:"",onClick:e[2]||(e[2]=h((e=>n.login.openLogoutWindow()),["prevent"]))}," Sign out ")])])],64)):(y(),c(f,{key:1},[on,d("ul",null,[(y(!0),c(f,null,L(n.login.providers,(e=>(y(),c("li",{key:e.id},[d("a",{href:"",onClick:h((l=>n.login.openLoginWindow(e.id)),["prevent"])},[e.image?(y(),c("img",{key:0,src:e.image},null,8,["src"])):w("",!0),m(" "+b(e.name),1)],8,["onClick"])])))),128))])],64))])]))));X.render=tn,X.__scopeId="data-v-0aaa1c9d",X.install=n=>{n.component(X.name,X)};const an=u(!1),un=S(an),sn=u(null),rn=S(sn),cn=j((()=>null!==rn.value)),dn=u(null),vn=S(dn),pn=u([]),gn=S(pn),mn=u(null),bn=S(mn),wn=u(null),fn=S(wn);let kn;const yn=x.events,hn=x.errors;function Ln(n,e={}){dn.value&&dn.value.connected&&dn.value.disconnect(),dn.value=new x(n,e),dn.value.connect(),dn.value.addEventListener(null,(n=>{var e;switch(e=n.type,Un.window&&Un.eventType==e&&setTimeout((()=>{Un.window&&Un.window.close(),Un.window=null}),100),n.type){case yn.connect:an.value=!0;break;case yn.disconnect:an.value=!1;break;case yn.login:sn.value=n.user;break;case yn.logout:sn.value=null,wn.value=null;break;case yn.update:sn.value=n.user;break;case yn.providers:pn.value=n.providers;break;case yn.about:mn.value=n;break;case yn.token:wn.value=n.token,clearTimeout(kn),kn=setTimeout((()=>{wn.value=null}),1e3*n.expiresIn)}}))}const Un={window:null,eventType:null};const Cn={connected:un,user:rn,loggedIn:cn,connect:Ln,disconnect:function(){dn.value&&dn.value.connected&&dn.value.disconnect()},client:vn,providers:gn,about:bn,token:fn,events:yn,errors:hn,setName:function(n){vn.value&&vn.value.setName(n)},openLoginWindow:function(n){if(!vn.value||!vn.value.connected)return;const e=gn.value.find((({id:e})=>n===e)),l=e&&e.loginURL||bn.value&&bn.value.baseUrl+"login/";l&&(Un.window=window.open(l),Un.eventType=yn.login)},openLogoutWindow:function(){if(!vn.value||!vn.value.connected)return;const n=bn.value&&bn.value.baseUrl+"logout/";n&&(Un.window=window.open(n),Un.eventType=yn.logout)},openBaseWindow:function(){if(!vn.value||!vn.value.connected)return;const n=bn.value&&bn.value.baseUrl;n&&window.open(n)}};var On=((n,a)=>{for(var u in a||(a={}))e.call(a,u)&&t(n,u,a[u]);if(l)for(var u of l(a))o.call(a,u)&&t(n,u,a[u]);return n})({install:(n,t={})=>{var{url:a}=t,u=((n,t)=>{var a={};for(var u in n)e.call(n,u)&&t.indexOf(u)<0&&(a[u]=n[u]);if(null!=n&&l)for(var u of l(n))t.indexOf(u)<0&&o.call(n,u)&&(a[u]=n[u]);return a})(t,["url"]);a&&Ln(a,u),n.provide("login",Cn),n.use(X)}},Cn);I(W).use(On).mount("#app");
