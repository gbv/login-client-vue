var n=Object.defineProperty,e=Object.prototype.hasOwnProperty,l=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,t=(e,l,o)=>l in e?n(e,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[l]=o;import{d as u,r as a,a as s,i as r,w as i,c,b as d,e as v,v as p,f as g,g as m,t as b,h as w,F as f,j as k,o as y,k as h,l as L,m as C,p as U,n as S,q as O,s as j,L as x,u as I}from"./vendor.14727f45.js";!function(n=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(l){const o=new URL(n,location),t=n=>{URL.revokeObjectURL(n.src),n.remove()};self[e]=n=>new Promise(((l,u)=>{const a=new URL(n,o);if(self[e].moduleMap[a])return l(self[e].moduleMap[a]);const s=new Blob([`import * as m from '${a}';`,`${e}.moduleMap['${a}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){u(new Error(`Failed to import: ${n}`)),t(r)},onload(){l(self[e].moduleMap[a]),t(r)}});document.head.appendChild(r)})),self[e].moduleMap={}}}("/login-client-vue/dev/assets/");const W=u({name:"App",setup(){const n=a("localhost:3004"),e=a(!1),l=a(""),o=s(r("login"));return o.connect(n.value,{ssl:e.value}),i((()=>o.user),(n=>{l.value=n&&n.name||""})),{url:n,ssl:e,name:l,login:o,version:"0.0.2",commit:"cbc72d7",branch:"dev"}}}),R=d("div",{style:{clear:"both"}},null,-1),T=d("h1",null," login-client-vue ",-1),_=d("b",null,"Connection:",-1),E=d("br",null,null,-1),M=d("br",null,null,-1),N=d("label",{for:"sslCheckbox"},"SSL",-1),P=d("br",null,null,-1),$=d("b",null,"Status:",-1),B=d("br",null,null,-1),F=d("br",null,null,-1),V=d("br",null,null,-1),q=d("br",null,null,-1),A=d("br",null,null,-1),D={key:0},z=d("br",null,null,-1),G=d("br",null,null,-1),H={key:1},J=d("br",null,null,-1),K={key:2},Q=d("hr",null,null,-1);W.render=function(n,e,l,o,t,u){const a=k("user-status");return y(),c(f,null,[d("nav",null,[d(a,{style:{float:"right"}}),R]),d("main",null,[T,d("section",null,[d("p",null,[_,E,v(d("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>n.url=e),type:"text",placeholder:"Login Server URL (without protocol)"},null,512),[[p,n.url]]),M,v(d("input",{id:"sslCheckbox","onUpdate:modelValue":e[2]||(e[2]=e=>n.ssl=e),type:"checkbox"},null,512),[[g,n.ssl]]),N,P,d("button",{onClick:e[3]||(e[3]=e=>n.login.connect(n.url,{ssl:n.ssl}))}," Connect ")]),d("p",null,[$,B,m(" Connected: "+b(n.login.connected),1),F,m(" Logged in: "+b(n.login.loggedIn),1),V,m(" User: "+b(n.login.user&&n.login.user.name),1),q,m(" Token: "+b(n.login.token?"✅":"❌"),1),A,n.login.loggedIn?(y(),c("span",D,[v(d("input",{"onUpdate:modelValue":e[4]||(e[4]=e=>n.name=e),type:"text",placeholder:"Name"},null,512),[[p,n.name]]),d("button",{onClick:e[5]||(e[5]=e=>n.login.setName(n.name))}," Set name "),z,d("button",{onClick:e[6]||(e[6]=e=>n.login.openLogoutWindow())}," Logout "),G])):(y(),c("span",H,[d("button",{onClick:e[7]||(e[7]=e=>n.login.openLoginWindow())}," Login "),J])),n.login.connected?(y(),c("span",K,[d("button",{onClick:e[8]||(e[8]=e=>n.login.disconnect())}," Disconnect ")])):w("",!0)])]),Q,d("footer",null," login-client-vue version "+b(n.version)+" ("+b(n.branch)+" - "+b(n.commit)+") ",1)])],64)};const X=u({name:"UserStatus",setup(){const n=r("login");return{login:s(n)}}}),Y=C();U("data-v-6c61604b");const Z={class:"user-status"},nn=d("span",{class:"carret-down"},"▼",-1),en={class:"user-status-dropdown"},ln={key:0},on=d("hr",null,null,-1),tn=d("p",null," Sign in via ",-1);S();const un=Y(((n,e,l,o,t,u)=>(y(),c("div",Z,[d("a",{href:"",class:{"user-status-disconnected":!n.login.connected},onClick:e[1]||(e[1]=h((e=>n.login.loggedIn?n.login.openBaseWindow():n.login.openLoginWindow()),["prevent"]))},[m(b(n.login.loggedIn?n.login.user.name:"Sign in")+" ",1),nn],2),d("div",en,[n.login.connected?n.login.loggedIn?(y(),c(f,{key:1},[d("p",null," Signed in as "+b(n.login.user.name)+". ",1),on,d("ul",null,[d("li",null,[d("a",{href:"",onClick:e[2]||(e[2]=h((e=>n.login.openLogoutWindow()),["prevent"]))}," Sign out ")])])],64)):(y(),c(f,{key:2},[tn,d("ul",null,[(y(!0),c(f,null,L(n.login.providers,(e=>(y(),c("li",{key:e.id},[d("a",{href:"",onClick:h((l=>n.login.openLoginWindow(e.id)),["prevent"])},[e.image?(y(),c("img",{key:0,src:e.image},null,8,["src"])):w("",!0),m(" "+b(e.name),1)],8,["onClick"])])))),128))])],64)):(y(),c("p",ln," Error: Could not connect to Login Server. "))])]))));X.render=un,X.__scopeId="data-v-6c61604b",X.install=n=>{n.component(X.name,X)};const an=a(!1),sn=O(an),rn=a(null),cn=O(rn),dn=j((()=>null!==cn.value)),vn=a(null),pn=O(vn),gn=a([]),mn=O(gn),bn=a(null),wn=O(bn),fn=a(null),kn=O(fn);let yn;const hn=x.events,Ln=x.errors;function Cn(n,e={}){vn.value&&vn.value.connected&&vn.value.disconnect(),vn.value=new x(n,e),vn.value.connect(),vn.value.addEventListener(null,(n=>{var e;switch(e=n.type,Un.window&&Un.eventType==e&&setTimeout((()=>{Un.window&&Un.window.close(),Un.window=null}),100),n.type){case hn.connect:an.value=!0;break;case hn.disconnect:an.value=!1;break;case hn.login:rn.value=n.user;break;case hn.logout:rn.value=null,fn.value=null;break;case hn.update:rn.value=n.user;break;case hn.providers:gn.value=n.providers;break;case hn.about:bn.value=n;break;case hn.token:fn.value=n.token,clearTimeout(yn),yn=setTimeout((()=>{fn.value=null}),1e3*n.expiresIn)}}))}const Un={window:null,eventType:null};const Sn={connected:sn,user:cn,loggedIn:dn,connect:Cn,disconnect:function(){vn.value&&vn.value.connected&&vn.value.disconnect()},client:pn,providers:mn,about:wn,token:kn,events:hn,errors:Ln,setName:function(n){pn.value&&pn.value.setName(n)},openLoginWindow:function(n){if(!pn.value||!pn.value.connected)return;const e=mn.value.find((({id:e})=>n===e)),l=e&&e.loginURL||wn.value&&wn.value.baseUrl+"login/";l&&(Un.window=window.open(l),Un.eventType=hn.login)},openLogoutWindow:function(){if(!pn.value||!pn.value.connected)return;const n=wn.value&&wn.value.baseUrl+"logout/";n&&(Un.window=window.open(n),Un.eventType=hn.logout)},openBaseWindow:function(){if(!pn.value||!pn.value.connected)return;const n=wn.value&&wn.value.baseUrl;n&&window.open(n)}};var On=((n,u)=>{for(var a in u||(u={}))e.call(u,a)&&t(n,a,u[a]);if(l)for(var a of l(u))o.call(u,a)&&t(n,a,u[a]);return n})({install:(n,t={})=>{var{url:u}=t,a=((n,t)=>{var u={};for(var a in n)e.call(n,a)&&t.indexOf(a)<0&&(u[a]=n[a]);if(null!=n&&l)for(var a of l(n))t.indexOf(a)<0&&o.call(n,a)&&(u[a]=n[a]);return u})(t,["url"]);u&&Cn(u,a),n.provide("login",Sn),n.use(X)}},Sn);I(W).use(On).mount("#app");
